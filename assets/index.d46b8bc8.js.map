{"version":3,"file":"index.d46b8bc8.js","sources":["../../vite/modulepreload-polyfill","../../Map.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import './style.css';\nimport \"ol/ol.css\";\nimport OSM from 'ol/source/OSM';\nimport TileLayer from 'ol/layer/Tile';\nimport ImageLayer from 'ol/layer/Image';\nimport BingMaps from 'ol/source/BingMaps';\n\n\n\n\n// define styles for map  \nconst styles = [\n  'CanvasDark',\n];\n\n\n// define empty layers for looping through the styles \nconst layers = [];\nlet i, ii;\nfor (i = 0, ii = styles.length; i < ii; ++i) {\n  layers.push(\n    new ol.layer.Tile({\n      visible: false,\n      preload: Infinity,\n      source: new ol.source.BingMaps({\n        key: 'AsU8_N1gSCabYrBjaZQEzQJTnM4UX0SwC3ChXxeTPpvjpBlgWpB60-tX51v1_8ue',\n        imagerySet: styles[i],\n      }),\n    })\n  );\n  \n}\n\n\n// define change eventlistener to change styles when clicked\nconst select = document.getElementById('layer-select');\nfunction onChange() {\n  const style = select.value;\n  for (let i = 0, ii = layers.length; i < ii; ++i) {\n    layers[i].setVisible(styles[i] === style);\n  }\n}\nselect.addEventListener('change', onChange);\nonChange();\n\n\n\n\n// The map\nvar map = new ol.Map\n\t\t({ \n\t\t\tlayers: layers,\n      view: new ol.View\n\t\t\t({\tzoom: 4,\n\t\t\t\tcenter: ol.proj.fromLonLat([-111.64845,40.73292]),\n\t\t\t}),\n\t\t});\n\n// Style for the clusters\n\tvar styleCache = {};\n\tfunction getStyle (f, resolution)\n\t{\tvar size = f.get('features').length;\n\t\tvar style = styleCache[size];\n\t\tif (!style)\n\t\t{\tvar color = size>25 ? \"248, 128, 0\" : size>8 ? \"248, 192, 0\" : \"128, 192, 64\";\n\t\t\tvar radius = Math.max(8, Math.min(size*0.75, 20));\n\t\t\tstyle = styleCache[size] =\n\t\t\t\t[ new ol.style.Style(\n\t\t\t\t\t{\timage: new ol.style.Circle(\n\t\t\t\t\t\t{\tradius: radius+2,\n\t\t\t\t\t\t\tstroke: new ol.style.Stroke(\n\t\t\t\t\t\t\t{\tcolor: \"rgba(\"+color+\",0.3)\", \n\t\t\t\t\t\t\t\twidth: 4\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t}),\n\t\t\t\t\tnew ol.style.Style(\n\t\t\t\t\t{\timage: new ol.style.Circle(\n\t\t\t\t\t\t{\tradius: radius,\n\t\t\t\t\t\t\tfill: new ol.style.Fill(\n\t\t\t\t\t\t\t{\tcolor:\"rgba(\"+color+\",0.6)\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}),\n\t\t\t\t\t\ttext: new ol.style.Text(\n\t\t\t\t\t\t{\ttext:size.toString(),\n\t\t\t\t\t\t\tfill: new ol.style.Fill(\n\t\t\t\t\t\t\t{\tcolor: '#000'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t];\n\t\t}\n\t\treturn style;\n\t}\n\n\n\n\n// define source\nconst source=  new ol.source.Vector({\n\t\t\tformat: new ol.format.GeoJSON(),\n\t\t\turl: 'https://wildfireviz.herokuapp.com/wildfire/api/v1/',\n    })\n\n\n\n\n// define cluster functionality\nvar clusterSource=new ol.source.Cluster({\n\t\tdistance: 40,\n\t\tsource: source,\n\t});\n\n\n\n\n// Animated cluster layer\nvar clusterLayer = new ol.layer.AnimatedCluster(\n\t{\tname: 'Cluster',\n\t\tsource: clusterSource,\n\t\tstyle: getStyle\n\t});\nmap.addLayer(clusterLayer);\nvar ext = map.getView().calculateExtent(map.getSize());\n\n\n  \n// Select cluster\nvar selectCluster = new ol.interaction.SelectCluster({\n  selectCluster: true,\n  animate: true,\n\n});\nmap.addInteraction(selectCluster);\n\n\n// Select Interaction\nvar selectLayer = new ol.interaction.Select({\n\thitTolerance:5,\n\tmulti: true,\n\tcondition: ol.events.condition.singleClick\n});\nmap.addInteraction(selectLayer);\n\n\n\n\n// Select Cluster and Display Cluster Information\nselectCluster.getFeatures().on(['add'], function(e) {\n\tvar wildLayer = e.element.get('features');\n\tif (wildLayer.length==1){\n        var feature = wildLayer[0];\n      $(\".details\").html(\"<i class='fa-solid fa-circle-info'></i>\" + \"</br>\");\n  \t\t$(\".clusterHeading\").html(wildLayer.length + \" feature Selected\");\n        $(\".clusterInfo\")\n\t\t.html(\"Location: \"+feature.get('title')+\" <br/>  Date of Occurence: \"+feature.get('date')+\"   <br/>  Coordinate of Location: \"+feature.get('coordinates')+ \"\");\n\t\tselectCluster.getFeatures().on(['remove'], function (e){\n      $(\".details\").html(\"\")});\n\n      }\n\t else\n\t  \t selectCluster.getFeatures().on(['remove'], function (e){\n      $(\".clusterHeading\").html(\"\")}),\n\t\t wildLayer.forEach(function(feature){\n      $(\".details\").html(\"<i class='fa-solid fa-asterisk'></i>\" + \"</br>\");\n\t\t\t$(\".clusterHeading\").html(\"Cluster with \" + wildLayer.length + \" features selected\")\n\t\t\t$(\".clusterInfo\").html(\"Click on a feature in the Animated Cluster Layer to see its details\" )\n\t\t\t\n\t\t\tselectCluster.getFeatures().on(['remove'], function (e){\n      \t\t$(\".details\").html(\"\")});\n\t\t\t}\n\t\t ) \n\t\t      \n    })\n    selectCluster.getFeatures().on(['remove'], function (e){\n      $(\".clusterInfo\").html(\"\");\n\n})\n\n\n\n// Print Map\nlet mapContainer  = document.getElementById('map');\nlet pdfPrint  = document.getElementById('pdfPrint');\n    // Print control\n    var printControl = new ol.control.Print();\n    map.addControl(printControl);\n\n    /* On print > save image file */\n    printControl.on('printing', function(e) {\n      mapContainer.style.opacity = 0.5;\n    });\n    printControl.on(['print', 'error'], function(e) {\n    //   $('#map').css('opacity', 1);\n      mapContainer.style.opacity = 1;\n      // Print success\n      if (e.image) {            //default printing as image\n        if (e.pdf) {\n          // Export pdf using the print info\n          var pdf = new jsPDF({\n            orientation: e.print.orientation,\n            unit: e.print.unit,\n            format: e.print.size\n          });\n          pdf.addImage(e.image, 'JPEG', e.print.position[0], e.print.position[0], e.print.imageWidth, e.print.imageHeight);\n          pdf.save();\n        } else  {\n        \n            e.canvas.toBlob(function(blob) {\n              saveAs(blob, 'map.'+e.imageType.replace('image/',''));\n            }, e.imageType);\n          \n        }\n      } else {\n        console.warn('No canvas to export');\n      }\n    });\n\n    //to handle printing pdf\n    pdfPrint.addEventListener('click',()=>{\n        printControl.print({pdf:true, imageType:'image/jpeg'})\n    })\n\n\n\n// Enter Location\nvar geocoder = new Geocoder('nominatim', {\n  provider: 'osm',\n  lang: 'en',\n  placeholder: 'Enter location ...',\n  limit: 5,\n  debug: false,\n  autoComplete: true,\n  keepOpen: false\n});\n\n\n\n// add all these functions to map\nmap.addControl(geocoder)\n\n// Listen when an address is chosen and clear the default marker added to the map\ngeocoder.on('addresschosen', function(evt){\n  var feature = evt.feature,\n      coord = evt.coordinate,\n      address = evt.address;\n  // clear the default marker\n  geocoder.getSource().clear(); \n});\n  \n\n// Loader Function\n$(\".loading\").hide(15000, function() {\n    map.setTarget(\"map\");\n  });\n\n"],"names":[],"mappings":"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"}